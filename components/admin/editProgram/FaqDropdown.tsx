import React, { useState } from 'react'

type Props = {
  faq: Faq
  index: number
  setFaqs: React.Dispatch<React.SetStateAction<Faq[]>>
}

const FaqDropdown = ({faq, index, setFaqs }: Props) => {
  const [toggle, setToggle] = useState(false)

  return (
    <div className='w-full min-w-[220px] max-w-[480px] mb-8'>
      <input aria-hidden="true" type="checkbox" name={"toggle_dropdown"+index} id={"toggle_dropdown"+index} className="hidden peer z-[11]" checked={toggle} onChange={() => setToggle(toggle => !toggle)}></input>
      <div className='relative'>
        <label role="button" htmlFor={"toggle_dropdown"+index} aria-label="dropdown" id="dropdown">
          <div className='flex flex-row w-full items-center justify-between bg-admin-card rounded-xl p-4 px-6 shadow-md z-[11]'> 
            <p className='text-secondary font-semibold'>{ faq.question }</p>
            <svg width="14" height="6" viewBox="0 0 11 5" fill="none" xmlns="http://www.w3.org/2000/svg" 
              aria-hidden='true' id='chevron-down'
              className='transition duration-300'
            >
              <path d="M10.7715 0.206184C10.6985 0.140851 10.6116 0.0889952 10.5159 0.0536073C10.4201 0.0182193 10.3175 0 10.2138 0C10.11 0 10.0074 0.0182193 9.91162 0.0536073C9.81588 0.0889952 9.72899 0.140851 9.65596 0.206184L6.05779 3.39864C5.98476 3.46397 5.89787 3.51583 5.80213 3.55122C5.7064 3.58661 5.60371 3.60482 5.5 3.60482C5.39629 3.60482 5.2936 3.58661 5.19787 3.55122C5.10213 3.51583 5.01524 3.46397 4.94221 3.39864L1.34404 0.206184C1.27101 0.140851 1.18412 0.0889952 1.08838 0.0536073C0.992646 0.0182193 0.88996 0 0.786248 0C0.682536 0 0.57985 0.0182193 0.484115 0.0536073C0.388379 0.0889952 0.301488 0.140851 0.228454 0.206184C0.0821305 0.336784 0 0.513451 0 0.697599C0 0.881748 0.0821305 1.05841 0.228454 1.18901L3.83447 4.38844C4.27639 4.78004 4.87543 5 5.5 5C6.12457 5 6.72361 4.78004 7.16553 4.38844L10.7715 1.18901C10.9179 1.05841 11 0.881748 11 0.697599C11 0.513451 10.9179 0.336784 10.7715 0.206184Z" fill="#260056"/>
            </svg>
          </div>
        </label>

        <div 
          className='relative w-full flex-col z-10 bg-admin-card rounded-b-xl shadow-md -top-2 px-6 p-4'
          id='dropdown-container'
          style={{display: toggle ? 'block' : 'none'}}
        >
          <p className='text-secondary'>{ faq.answear }</p>
        </div>

        <div 
          onClick={() => setFaqs(faqs => faqs.filter((item, i) => index != i))}
          className='absolute -top-4 -right-4 bg-[#E9E9E9] rounded-full p-[10px] cursor-pointer hover:scale-[1.05] transition-all'
        >
          <svg width="16" height="18" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12.9987 2.66667H10.932C10.7773 1.91428 10.3679 1.23823 9.77287 0.752479C9.17782 0.266727 8.4335 0.000969683 7.66537 0L6.33203 0C5.5639 0.000969683 4.81958 0.266727 4.22453 0.752479C3.62949 1.23823 3.2201 1.91428 3.06536 2.66667H0.998698C0.821887 2.66667 0.652318 2.7369 0.527293 2.86193C0.402269 2.98695 0.332031 3.15652 0.332031 3.33333C0.332031 3.51014 0.402269 3.67971 0.527293 3.80474C0.652318 3.92976 0.821887 4 0.998698 4H1.66536V12.6667C1.66642 13.5504 2.01795 14.3976 2.64284 15.0225C3.26774 15.6474 4.11497 15.9989 4.9987 16H8.9987C9.88243 15.9989 10.7297 15.6474 11.3546 15.0225C11.9794 14.3976 12.331 13.5504 12.332 12.6667V4H12.9987C13.1755 4 13.3451 3.92976 13.4701 3.80474C13.5951 3.67971 13.6654 3.51014 13.6654 3.33333C13.6654 3.15652 13.5951 2.98695 13.4701 2.86193C13.3451 2.7369 13.1755 2.66667 12.9987 2.66667ZM6.33203 1.33333H7.66537C8.07888 1.33384 8.48212 1.46225 8.81977 1.70096C9.15743 1.93967 9.41298 2.27699 9.55137 2.66667H4.44603C4.58442 2.27699 4.83997 1.93967 5.17762 1.70096C5.51528 1.46225 5.91852 1.33384 6.33203 1.33333ZM10.9987 12.6667C10.9987 13.1971 10.788 13.7058 10.4129 14.0809C10.0378 14.456 9.52913 14.6667 8.9987 14.6667H4.9987C4.46827 14.6667 3.95956 14.456 3.58448 14.0809C3.20941 13.7058 2.9987 13.1971 2.9987 12.6667V4H10.9987V12.6667Z" fill="#FF0F0F"/>
            <path d="M5.66667 11.9998C5.84348 11.9998 6.01305 11.9296 6.13807 11.8046C6.2631 11.6796 6.33333 11.51 6.33333 11.3332V7.33317C6.33333 7.15636 6.2631 6.98679 6.13807 6.86177C6.01305 6.73674 5.84348 6.6665 5.66667 6.6665C5.48986 6.6665 5.32029 6.73674 5.19526 6.86177C5.07024 6.98679 5 7.15636 5 7.33317V11.3332C5 11.51 5.07024 11.6796 5.19526 11.8046C5.32029 11.9296 5.48986 11.9998 5.66667 11.9998Z" fill="#FF0F0F"/>
            <path d="M8.33268 11.9998C8.50949 11.9998 8.67906 11.9296 8.80409 11.8046C8.92911 11.6796 8.99935 11.51 8.99935 11.3332V7.33317C8.99935 7.15636 8.92911 6.98679 8.80409 6.86177C8.67906 6.73674 8.50949 6.6665 8.33268 6.6665C8.15587 6.6665 7.9863 6.73674 7.86128 6.86177C7.73625 6.98679 7.66602 7.15636 7.66602 7.33317V11.3332C7.66602 11.51 7.73625 11.6796 7.86128 11.8046C7.9863 11.9296 8.15587 11.9998 8.33268 11.9998Z" fill="#FF0F0F"/>
          </svg>
        </div>
      </div>
    </div>
  )
}

export default FaqDropdown